/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
!function(a,b){if("function"==typeof define&&define.amd)define(["exports"],b);else if("undefined"!=typeof exports)b(exports);else{var c={exports:{}};b(c.exports),a.localforage=c.exports}}(this,function(a){"use strict";function b(a){return new Promise(function(b,c){a.onsuccess=function(){b(a.result)},a.onerror=function(){c(a.error)}})}function c(a,c,d){var e,f=new Promise(function(f,g){e=a[c].apply(a,d),b(e).then(f,g)});return f.abort=function(){return e&&e.abort&&e.abort()},f}function d(a,b,c){function d(){return g=!0,h?void(i=k(h)):void f()}function e(){i&&i.abort(),g&&m&&(m.reject(i&&i.error||new Error("Aborted by user")),m=null),j--}function f(){j||(g&&m&&(m.reject(new Error("Aborted by user")),m=null),l.resolve())}function k(a){var f=new Promise(function(b,c){a.onsuccess=function(){b(a.result)},a.onerror=function(){c(a.error)}});return f.abort=function(){try{a.abort()}catch(b){console.error("Error aborting:",b)}},f}if(!a)return Promise.reject(new Error("Invalid arguments"));var g=!1,h=null,i=null,j=0,l={promise:new Promise(function(a){l.resolve=a}),getPromise:function(){return this.promise},cancel:function(){d()}},m=null;return n(b)?(j=b.length,b.forEach(function(a,b){a?c(a).then(function(c){g||(m={resolve:function(a){l.resolve(a)},reject:function(a){l.reject(a)}},h=a(c,l.getPromise()),d())},function(a){j--,g||(j||l.reject(a))}):j--}),j||f(),l.promise):(m={resolve:function(a){l.resolve(a)},reject:function(a){l.reject(a)}},c(b).then(function(c){g||(h=a(c,l.getPromise()),d())})["catch"](function(a){l.reject(a)}),l.promise)}function e(a,b,d,e){var f,g,h,i,j,k,l;if(1===arguments.length&&"function"==typeof a&&(g=a,f={}),f||(f={}),f.name||(f.name="localforage"),f.storeName||(f.storeName="keyvaluepairs"),f.driver&&!n(f.driver)&&(f.driver=[f.driver]),f.driver&&n(f.driver)&&-1!==f.driver.indexOf(D)&&f.driver.splice(f.driver.indexOf(D),1),f.driver&&n(f.driver)&&-1!==f.driver.indexOf(null)&&f.driver.splice(f.driver.indexOf(null),1),g||(g=function(){}),this._initStorage(f),h=this,i=function(){},h._dbInfo?(i=function(){g(null,h)},"function"==typeof define&&define.amd?require(["localforageSerializer"],function(a){j=a,i()}):(j=window.localforageSerializer,i())):g(h),h}function f(){if("function"!=typeof Promise)throw Error("localforage requires a Promise implementation")}function g(){return"boolean"==typeof q?q:q=void 0!==r,q}function h(a){return new Promise(function(b){var c=window.indexedDB.open(a,1);c.onupgradeneeded=function(){c.result.createObjectStore(G,{keyPath:H})},c.onsuccess=function(){b(c.result)},c.onerror=function(){b(null)}})}function i(a){try{return window.indexedDB.deleteDatabase(a),!0}catch(b){return!1}}function j(){return"function"==typeof openDatabase}function k(a,b){a=a||[],b=b||{};try{return new Blob(a,b)}catch(c){if("TypeError"!==c.name)throw c;for(var d=window.BlobBuilder||window.MSBlobBuilder||window.MozBlobBuilder||window.WebKitBlobBuilder,e=new d,f=0;f<a.length;f+=1)e.append(a[f]);return e.getBlob(b.type)}}function l(){for(var a=K.length,b=K.slice(0),c=[],d=0;a>d;d++){var e=K[d];e&&c.push(e)}return n(c)?c:null}function m(a,b){p(a,b),"string"!=typeof b&&void 0===b.constructor?A.call(this,a).then(function(b){return b?b:null},function(b){return b.code===b.NOT_FOUND_ERR?null:b}):u.call(this,a).then(function(c){return c?B.call(this,a,b):v.call(this,a,b)}.bind(this))}function o(a,b,c){b={_status:"created",_id:a};for(var d in c)c.hasOwnProperty(d)&&("_"===d.charAt(0)?b[d]=c[d]:b.data=c);return b}function p(a,b){"string"!=typeof a&&console.warn(a+" used as a key, but it is not a string."),b&&"undefined"==typeof b.constructor&&console.warn('An invalid value was used as item value. Storing "undefined" is not supported. Use null instead.'),a=a.replace(/\//g,"_").replace(/[^a-zA-Z0-9_\-\. ]*/g,"");var c=a.charAt(0);return"_"===c&&console.warn("Using '_' as the first character in your key is not allowed. This has been replaced with '__'."),a="__"===c?a:c+"__"+a.slice(1),a}function s(a,b,c,d){var e;if(a&&(e=a.indexNames?a.indexNames:a.indexedDB?a.indexedDB.indexNames||a.indexedDB.mozIndexedNames||a.indexedDB.webkitIndexedNames||a.indexedDB.msIndexedNames:a.webkitIndexedDB?a.webkitIndexedDB.indexNames||a.webkitIndexedDB.mozIndexedNames||a.webkitIndexedDB.webkitIndexedNames||a.webkitIndexedDB.msIndexedNames:a.mozIndexedDB?a.mozIndexedDB.indexNames||a.mozIndexedDB.mozIndexedNames||a.mozIndexedDB.webkitIndexedNames||a.mozIndexedDB.msIndexedNames:a.msIndexedDB?a.msIndexedDB.indexNames||a.msIndexedDB.mozIndexedNames||a.msIndexedDB.webkitIndexedNames||a.msIndexedDB.msIndexedNames:[],"undefined"!=typeof e&&e.length>0)){var f=!1;for(var g in e)e[g]===b&&(f=!0);return f}}function t(a,b){a=a||[],b=b||{};try{return new Blob(a,b)}catch(c){if("TypeError"!==c.name)throw c;for(var d=window.BlobBuilder||window.MSBlobBuilder||window.MozBlobBuilder||window.WebKitBlobBuilder,e=new d,f=0;f<a.length;f+=1)e.append(a[f]);return e.getBlob(b.type)}}function w(a){for(var b=a.createObjectStore(J,{keyPath:K}),c=0;c<Q.length;c++){var d=Q[c];"name"!==d&&b.createIndex(d,d)}return b}function x(a,b){var c=this,d=a._id,e=this.promise;h(a.name).then(function(a){a?(a.objectStoreNames.contains(J)||(a.close(),a=null),a||setTimeout(function(){x.call(c,{"_status":"pending","_id":d,"data":a.data},b)},0)):(j(d)||console.log("NOTHING:",d),e.resolve("OK"))})}function y(a){function b(a){var b=a.target.error||a.target.errorMessage||a.target.webkitErrorMessage||a.target.mozErrorMessage||"Unknown error";c.reject(b)}var c=this.promise;try{var d=this,e=d.db.transaction([J],"readwrite").objectStore(J),f=e.get(a);f.onsuccess=function(a){var b=a.target.result;b&&"pending"===b._status?(d.db.close(),d.db=null,c.resolve(P(b.data,"readonly"))):c.resolve()},f.onerror=b}catch(g){c.reject(g)}}function z(a){function b(a){var b=a.target.error||a.target.errorMessage||a.target.webkitErrorMessage||a.target.mozErrorMessage||"Unknown error";c.reject(b)}var c=this.promise;try{var d=this,e=d.db.transaction([J],"readwrite"),f=e.objectStore(J),g=f.openCursor();g.onsuccess=function(e){var g=e.target.result;if(g){var h=g.value;h.name===a&&"pending"===h._status?(d.db.close(),d.db=null,f["delete"](h._id),c.resolve(!0)):g["continue"]()}else c.resolve(!1)},g.onerror=b}catch(h){c.reject(h)}}function C(a){function b(a){var b=a.target.error||a.target.errorMessage||a.target.webkitErrorMessage||a.target.mozErrorMessage||"Unknown error";c.reject(b)}var c=this.promise;try{var d=this,e=this.db.transaction([J],"readwrite"),f=e.objectStore(J),g=f.openCursor();g.onsuccess=function(b){var e=b.target.result;if(e){var g=e.value;"pending"===g._status?(d.db.close(),d.db=null,f["delete"](g._id),setTimeout(function(){var b=new C(a);c.resolve(b.promise)},0)):e["continue"]()}else c.resolve(!0)},g.onerror=b}catch(h){c.reject(h)}}function E(a,b){function c(a){var b=a.target.error||a.target.errorMessage||a.target.webkitErrorMessage||a.target.mozErrorMessage||"Unknown error";d.reject(b)}var d=this.promise;try{var e=this.db.transaction([J],"readwrite"),f=e.objectStore(J);a._status="pending",f.add(a),e.oncomplete=function(){d.resolve(b)},e.onabort=e.onerror=c}catch(g){d.reject(g)}}var F=this,G={},H={},I="dexie",J="localForage",K="_localforageDatabase",L="_localforage",M=.015,N="keyvaluepairs",O="readonly",P="readwrite",Q=["name","storeName","version","description","size"],R={promise:null,resolve:null,reject:null};e.configure=function(a,b,c,d){if("undefined"!=typeof c){d=c;var e={};if("object"==typeof a){for(var f in a)"storeName"!==f&&(e[f]=a[f]);c={storeName:b,name:a.name||e.name}}else e.name=a,c="object"==typeof b?{storeName:b.storeName||void 0}:{storeName:b};e.storeName=c.storeName||"keyvaluepairs",this.options=e}else a="undefined"!=typeof a?a:"keyvaluepairs",b="undefined"!=typeof b?b:"localforage";var g=this;return this.init({name:a,storeName:b}).then(function(a){return"function"==typeof d&&d.call(g,a),a})},e.prototype.options={},e.prototype.extendPrototype=!0,e.prototype._defaultConfig={description:"",name:L,size:4980736,storeName:N,version:1},e.prototype._initStorage=function(a){function b(){var a=this,c=a._dbInfo;a.driver()["catch"](function(a){throw console.error("Failed to determine indexedDB support. ",a),a})}var c=F;c.extendPrototype&&Object.defineProperty(Array.prototype,"map",{value:function(a){if("function"!=typeof a)throw new TypeError(a+" is not a function");for(var b,c=F.arguments.length>=2?F.arguments[1]:void 0,d=Object(this),e=d.length>>>0,f=new Array(e),g=0;g<e;g++)g in d&&(b=d[g],f[g]=a.call(c,b,g,d));return f},configurable:!0,writable:!0}),c.extendPrototype&&Object.defineProperty(Array.prototype,"forEach",{value:function(a){if("function"!=typeof a)throw new TypeError(a+" is not a function");for(var b=F.arguments.length>=2?F.arguments[1]:void 0,c=Object(this),d=c.length>>>0,e=0;e<d;e++)e in c&&a.call(b,c[e],e,c)},configurable:!0,writable:!0});var d;d=a.name?a.name:this._defaultConfig.name;var e;e=a.storeName?a.storeName:this._defaultConfig.storeName,this._config={description:"",name:d,size:4980736,storeName:e,version:1},this._dbInfo=null,this._ready=!1,b.call(this)},e.prototype._extend=function(a,b){var c,d=F;if(b)for(c in a)a.hasOwnProperty(c)&&(d.prototype[c]=a[c])},e.prototype._getDb=function(){var a=this,b=a._dbInfo;if(null===b)throw new Error("Database not yet opened or dropped.");return b.db},e.prototype._serialize=function(a){return j?j.stringify(a):JSON.stringify(a)},e.prototype._deserialize=function(a){return j?j.parse(a):JSON.parse(a)},e.prototype.serialize=function(a){return this._serialize(a)},e.prototype.deserialize=function(a){return this._deserialize(a)},e.prototype.ready=function(a){var b=this;try{return e.prototype.ready.apply(this,arguments)["catch"](function(a){throw a})}catch(c){return Promise.reject(c)}},e.prototype.config=function(a){a=a||{};var b=this._defaultConfig;return a=U(b,a),this._config=a,a},e.prototype.defineDriver=function(a,b){var c=this,d=new Promise(function(b,c){try{var d=a._driver,e=O.getDriver.apply(c,[d]),f=O.driverSupport.apply(c,[e]);a._initStorage||(console.error("localForage.defineDriver() called incorrectly. Driver has no _initStorage method."),f=!1),!f?c(Error("localForage.defineDriver() called incorrectly. WebSQL is not a valid storage engine. Please use indexedDB, localStorage, or sessionStorage.")):f&&"function"==typeof a._initStorage?b({db:e}):(console.error("localForage.defineDriver() called incorrectly. Driver not ready. Please use a callback to defineDriver()."),c())}catch(g){c(g)}});return d.then(function(){a._driver=a._driver||"CustomStorage";var b=a._driver,c=O.getDriver.apply(O,[b]);c&&"function"==typeof a._initStorage&&(c[b+"_init"]=a._initStorage,c[b+"_initStorage"]=a._initStorage,c[b]=a)})["catch"](function(a){throw a}),d},e.prototype.dropInstance=function(a,b){return a="object"==typeof a?a:{name:a},b=b||function(){},R.promise=new Promise(function(a,b){R.resolve=a,R.reject=b}),new C(a),R.promise.then(function(a){return"function"==typeof b&&b(),a})["catch"](function(a){throw"function"==typeof b&&b(a),a})},"function"==typeof define&&define.amd?define(["exports"],function(a){a["default"]=e,a.localforage=e,a.createInstance=e.createInstance}):"undefined"!=typeof module&&module.exports?(module.exports=e,module.exports.localforage=e,module.exports.createInstance=e.createInstance):(F.localforage=e,F.createInstance=e.createInstance),a.localforage=e})(Array.prototype,"map",{value:function(a){if("function"!=typeof a)throw new TypeError(a+" is not a function");for(var b,c=n.arguments.length>=2?n.arguments[1]:void 0,d=Object(this),e=d.length>>>0,f=new Array(e),g=0;g<e;g++)g in d&&(b=d[g],f[g]=a.call(c,b,g,d));return f},configurable:!0,writable:!0});var s={},t={},u={},v=5e3,w=6e4,x=0,y=function(){function a(b,c,e){if(!b||"function"!=typeof b[0]&&"string"!=typeof b[0]&&b[0]!==d)return c(b);if("function"!=typeof b[0]){if(b[0]===d)return c(e,b[0]);var f=b[0],g=t[f];if(!g)return c(b);e[f]=g,a(b.slice(1),c,e)}else b[0](function(){var d,f=Array.prototype.slice.call(arguments);d=f.shift()?(d=f[0]instanceof Error?f[0]:new Error("A callback in localforage's queue threw an error:\n"+(f[0]&&f[0].message||f[0]||d.message)),f=[d]):f,a(b.slice(1),c,e)})}var b=0,c={},d="@@done",e=function(b,e){if(!c[x])return void setTimeout(e,v);try{a(c[x].items,function(a){var b,d=0,f=function(){return 1>c[x].items.length||d>=c[x].items.length?void delete c[x]:(b=c[x].items[d],void setTimeout(function(){a!==b&&e()},0))};return!a||!a.length?void delete c[x]:(a===d&&(delete c[x],e()),void f())},u)}catch(f){delete c[x],setTimeout(function(){throw f},0),e()}};return{open:function(a,d){b++;var f=function(){c[x]||(c[x]={items:[]}),d&&d(),e(0,f)};f()},close:function(a,d){if(b--,b<0&&(b=0),d)return c[a]||(c[a]={items:[]}),c[a].items.push(d),void e(a,function(){});if(!c[a])return;var f=c[a].items.length;if(!f)return void delete c[a];for(var g=0,h=f;h>g;g++)c[a].items.push(d)},closeAll:function(){return new Promise(function(a,c){var d=Object.keys(b);if(!d.length)return void a();var e=function(a,b){a?c(a):b>=d.length?c():u.close(d[b],function(){e(null,b+1)})};e(null,0)})},push:function(a,b){return t?c[a]||(c[a]={items:[]}),c[a].items.push(b),void e(a,function(){}):b()},getQueue:function(a){return c[a]},setQueue:function(a,b){return c[a]=b,b},setExtraDriver:function(a,b){var c=arguments;if("object"==typeof a&&"object"==typeof a)for(var d=0;d<c.length;d++)t[c[d]]=c[d],u[c[d]]=c[d]},getExtraDriver:function(a){return t[a]&&t[a]},getExtraDrivers:function(){return Object.keys(t)},clearExtraDrivers:function(){t={}},queueCapacity:w}}();!function(){var a=1;try{var b=window.localStorage,c="localforagedb-askdasdcasoicnas11213";b.setItem(c,c),b.removeItem(c)}catch(d){a=0}return a}();var z,A,B="importFunctions",C=function(a,b){try{y.open(a,b)}catch(c){throw c}},D=function(a,b){b&&y.push(a,b)},E=function(){y.closeAll()},F=function(a,b,c){y.push(a,function(){var d,e=b;try{d=e.apply(a,c||[])}catch(f){return void y.close(a)}return d&&d.then&&"function"==typeof d.then?void d.then(function(){y.close(a)},function(b){y.close(a),b&&b.message&&console.warn(b.message),b&&console.error(b)}):void y.close(a)})},G=function(){var a,b=1;try{a=localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test")}catch(c){b=0}return b},H=function(a){var b=this,c={};if(a)for(var d in a)c[d]=a[d];return c.keyPrefix=c.name+"/",c.storeName!==b._defaultConfig.storeName&&(c.keyPrefix+=c.storeName+"/"),b._dbInfo=c,new Promise(function(a,d){if(!G())return d("Not supported: localStorage");"undefined"==typeof localStorage?d(new Error("localStorage is not defined")):a({db:localStorage})})},I=function(a,b){var c=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var d=c._dbInfo;D(B,function(){var e="";d.keyPrefix&&(e=a.indexOf(d.keyPrefix)===0?a.substring(d.keyPrefix.length):a),a=d.keyPrefix+e;var f=localStorage.getItem(a);return f&&(f=c._deserialize(f)),b(f)})},J=function(a,b){return localStorage.getAllKeys?localStorage.getAllKeys().then(function(a){b(a)}):void b(Object.keys(localStorage))},K=function(a){var b=this,c=b._dbInfo;D(B,function(){for(var d=c.keyPrefix.length,e=localStorage.length,f=[],g=0;e>g;g++){var h=localStorage.key(g);0===h.indexOf(c.keyPrefix)&&f.push(h.substring(d))}a(f)})},L=function(a,b){var c=this,d=c._dbInfo;D(B,function(){var e="";d.keyPrefix&&(e=a.indexOf(d.keyPrefix)===0?a.substring(d.keyPrefix.length):a),a=d.keyPrefix+e;var f=localStorage.getItem(a);return f&&(f=c._deserialize(f)),b(f)})},M=function(a,b){var c=this,d=c._dbInfo;D(B,function(){a||c._iterate(function(){},function(){a=[]});var e=!1,f=0,g=localStorage.length;a.sort();var h={_idx:0};b(h);for(var i=function(){for(;f<a.length;){var b=a[f],g="";d.keyPrefix&&(g=b.indexOf(d.keyPrefix)===0?b.substring(d.keyPrefix.length):b),b=d.keyPrefix+g;var j=localStorage.getItem(b);if(j&&(j=c._deserialize(j)),void 0!==j){h._idx=f;var k=h._idx+1>=a.length;return void b(j,g,k)}f++}e=!0,b()};!e;)i()})},N=function(a,b){var c=this,d=c._dbInfo;D(B,function(){var e="";d.keyPrefix&&(e=a.indexOf(d.keyPrefix)===0?a.substring(d.keyPrefix.length):a),a=d.keyPrefix+e;try{localStorage.setItem(a,c._serialize(b))}catch(f){if(f.name==="QuotaExceededError"||f.name==="NS_ERROR_DOM_QUOTA_REACHED"||f.name==="QuotaExceededError (DOM Exception 22)"||f.name==="QUOTA_EXCEEDED_ERR"||f.name==="QUOTA_EXCEEDED_ERR (DOM Exception 22)"||f.name==="W3CException_DOM_QUOTA_EXCEEDED_ERR"||f.name===18){if(d.name!=="localStorageWrapper"){throw f}console.warn('localStorage has reached its quota. Data with key "'+a+'" will be removed to free up space.');try{localStorage.removeItem(a)}catch(g){throw f}try{localStorage.setItem(a,c._serialize(b))}catch(h){throw f}}else{throw f}}})},O=function(a,b){var c=this;D(B,function(){var d=c._dbInfo;a=d.keyPrefix+a;try{localStorage.removeItem(a)}catch(e){console.warn("Failed to remove value with key: "+a)}b()})},P=function(a){var b=this,c=b._dbInfo;D(B,function(){var d="";c.keyPrefix&&c.keyPrefix.length>0&&(d=c.keyPrefix);try{localStorage.clear()}catch(e){if(1==localStorage.length&&localStorage.key(0)==d)try{localStorage.removeItem(d)}catch(f){throw e}else throw e}a()})},Q=function(a){return new Promise(function(b){a(b)})},R=function(a){var b=this,c=b._dbInfo;return new Promise(function(d,e){if(c.db){a(c.db)["then"](d,e)}else{throw e("Can't operate on closed db")}}).then(function(a){return a})},S=function(a,b){var c=this;a=a||{};var d=a.name||"localforage";return a.storeName=a.storeName||d+"KV",c._initStorage(a),Oa.resolve("localStorage",c,b)},T=Object.prototype.toString,U=function(){for(var a={},b=0;arguments.length>b;b++){var c=arguments[b];if("[object Object]"===T.call(c))for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}return a},V={},W=function(a,b,c,d){d||(d={});var e=Date.now();F(B,function(){var f=a._dbInfo,g=f.keyPrefix+("function"==typeof c.key?c.key():c.key);c.dbInfo=f;var h=g,i=function(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b};try{var j=V[h];j&&j._loading&&(c.__loading=!0)}catch(k){}var l=new D;return l._options=d,l._loading=!0,V[h]=l,d.noWait||(l._loading=!1),b(c)})},X=function(a,b,c){return new Promise(function(e,f){if("function"==typeof a){var g={key:"",value:null};if(b&&"Object"!==